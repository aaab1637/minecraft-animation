<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smooth Pop-in Image (Uploader)</title>
  <style>
    :root { --t: 650ms; --e: cubic-bezier(.2,.8,.2,1); --bg: #0b0d12; }
    * { box-sizing: border-box; }
    body {
      margin: 0; min-height: 100svh; display: grid; place-items: center; gap: 16px;
      background: radial-gradient(1200px 800px at 70% 20%, #141821, var(--bg));
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: #d6deea; padding: 24px;
    }
    .card {
      width: min(72vmin, 420px); aspect-ratio: 1/1; display: grid; place-items: center;
      background: rgba(255,255,255,.03); border-radius: 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
      padding: 28px; backdrop-filter: blur(6px);
    }
    .animate { transform: translateZ(0) scale(.86); opacity: 0; animation: pop var(--t) var(--e) forwards; }
    .img-wrap { width: 100%; height: 100%; display: grid; place-items: center; }
    img { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 12px 22px rgba(0,0,0,.35)); }
    .controls { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; justify-content: center; }
    .file, .drop {
      appearance: none; background: rgba(255,255,255,.1); color: #e7eefc;
      padding: 10px 14px; border-radius: 12px; border: none; cursor: pointer; font: inherit;
    }
    .drop { border: 2px dashed rgba(255,255,255,.18); background: transparent; }
    .drop.active { border-color: rgba(255,255,255,.4); background: rgba(255,255,255,.04); }
    .hint { font-size: 12px; color: #a7b0c0; opacity: .9; text-align: center; }
    @keyframes pop {
      0% { transform: translateY(8px) scale(.86); opacity: 0; filter: saturate(.8) blur(.4px); }
      60% { transform: translateY(-2px) scale(1.04); opacity: 1; }
      100% { transform: translateY(0) scale(1); opacity: 1; filter: none; }
    }
    @media (prefers-reduced-motion: reduce) { .animate { animation: none; opacity: 1; transform: none; } }
    input[type="file"] { display:none }
  </style>
</head>
<body>
  <div class="wrap" style="display:grid;gap:12px;place-items:center">
    <div id="card" class="card animate" role="img" aria-label="Pop-in image container">
      <div class="img-wrap">
        <img id="preview" alt="Preview image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHqQJ/0r3b0wAAAABJRU5ErkJggg==" />
      </div>
    </div>

    <div class="controls">
      <label class="file">
        <input id="uploader" type="file" accept="image/*" />
        Choose image…
      </label>
      <button id="drop" class="drop" type="button" aria-label="Drop an image here">or drag & drop here</button>
    </div>
    <div class="hint">Tip: upload any image — the pop-in animation will replay automatically.</div>
  </div>

  <script>
    const $ = (s, r=document) => r.querySelector(s);
    const uploader = $('#uploader');
    const preview  = $('#preview');
    const card     = $('#card');
    const dropZone = $('#drop');

    const replay = () => { card.classList.remove('animate'); void card.offsetWidth; card.classList.add('animate'); };

    function setImage(file) {
      if (!file || !file.type.startsWith('image/')) return;
      const reader = new FileReader();
      reader.onload = e => { preview.src = e.target.result; replay(); };
      reader.readAsDataURL(file);
    }

    uploader.addEventListener('change', (e) => setImage(e.target.files[0]));

    // Drag & drop (use capture on document to avoid accidental page opens)
    ['dragenter','dragover'].forEach(evt => {
      document.addEventListener(evt, e => e.preventDefault(), true);
      dropZone.addEventListener(evt, e => { e.preventDefault(); dropZone.classList.add('active'); }, false);
    });
    ['dragleave','drop'].forEach(evt => {
      dropZone.addEventListener(evt, e => { e.preventDefault(); dropZone.classList.remove('active'); }, false);
    });
    dropZone.addEventListener('drop', (e) => setImage(e.dataTransfer.files[0]));
  </script>
</body>
</html>
